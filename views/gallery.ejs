<%- include('partials/head') %>
<%- include('partials/nav') %>
<main class="container" style="<% if (galleryBg) { %>--gallery-bg:url('<%= galleryBg %>')<% } %>">
  <div class="gallery-hero-spacer"></div>
  <section class="gallery-content">
    <div style="text-align:center; margin-bottom: 2em;">
      <h2 style="margin:0; font-size:2.8em;">Nischithartham (Engagement)</h2>
      <div style="margin-top:0.5em; font-size:1.4em;">3/8/25</div>
    </div>
    
    <!-- YouTube Video Embed -->
    <div style="text-align: center; margin-bottom: 2em;">
      <div style="position: relative; width: 100%; max-width: 800px; margin: 0 auto; padding-bottom: 56.25%; height: 0; border-radius: 12px; overflow: hidden; box-shadow: 0 10px 30px rgba(0,0,0,0.5);">
        <iframe 
          style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: 0;" 
          src="https://www.youtube.com/embed/FyNYGpJRpOY?rel=0&modestbranding=1&showinfo=0" 
          title="Nischithartham Video" 
          allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
          allowfullscreen>
        </iframe>
      </div>
    </div>
    
    <section class="gallery">
    <% if (images && images.length) { %>
      <% images.forEach(function(src, idx){ %>
        <figure class="photo" style="--i:<%= idx %>">
          <img loading="lazy" src="<%= src %>" alt="Gallery image <%= idx+1 %>">
        </figure>
      <% }) %>
    <% } else { %>
      <p>No images yet. Add some to <code>public/images/gallery</code>.</p>
    <% } %>
    </section>
  </section>
  <div class="end-spacer"></div>
  <script src="/js/main.js" defer></script>
  <% if (galleryBg) { %>
  <script>
    // Set CSS variable on body for background image
    document.addEventListener('DOMContentLoaded', ()=>{
      document.body.style.setProperty('--gallery-bg', "url('<%= galleryBg %>')")
    })
  </script>
  <% } %>
  <!-- Removed rotate-in effect and scroll reveal logic -->
  <noscript><style>.gallery-title,.gallery{opacity:1;transform:none}</style></noscript>
  <style>
  .gallery{display:grid;gap:32px;margin-top:24px}
  .photo{box-shadow:0 10px 30px rgba(0,0,0,.25)}
  .photo img{width:100%;height:auto;border-radius:16px;display:block}
  /* reverted orientation-based grid span */
    .end-spacer{height:20vh}
    @media (min-width: 800px){
      .gallery{grid-template-columns: repeat(2, 1fr)}
      .photo:nth-child(3n){grid-column: span 2}
    }
    /* background hook when galleryBg is provided */
  .page-gallery-bg{min-height:100vh;}
  .page-gallery-bg{background: #000 var(--gallery-bg, none) center/cover fixed no-repeat;}
  </style>
</main>
<%- include('partials/footer') %>
